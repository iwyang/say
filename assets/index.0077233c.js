var A=Object.defineProperty;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var C=(c,a,o)=>a in c?A(c,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[a]=o,E=(c,a)=>{for(var o in a||(a={}))L.call(a,o)&&C(c,o,a[o]);if(k)for(var o of k(a))D.call(a,o)&&C(c,o,a[o]);return c};import{d as x,r as v,u as U,o as j,a as M,b as w,c as P,e as b,f as t,w as d,g as u,N as T,h as I,i as f,j as h,k as B,l as R,m as J,n as z,p as K,q as V,s as W,t as $}from"./vendor.6e45e2e3.js";const G=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))m(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function m(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};G();const H={class:"flex items-center justify-center max-w-5xl mx-auto my-10"},Q={class:"flex-1 px-10 py-10 mx-3 my-10 bg-white rounded-lg shadow-xl"},X={class:"text-center"},Y=z(" \u53D1\u5E03 "),Z=x({setup(c){const a=v(null),o=U(),m={api:{required:!0},userId:{required:!0},token:{required:!0},type:{required:!0},tag:{required:!0},showComment:{required:!0},content:{required:!0}},s=[{label:"\u5168\u90E8\u53EF\u89C1",value:"0"},{label:"\u767B\u5F55\u53EF\u89C1",value:"1"},{label:"\u81EA\u5DF1\u53EF\u89C1",value:"2"}],r=v([]),g=v([{label:"\u5141\u8BB8\u8BC4\u8BBA",value:"1"},{label:"\u4E0D\u5141\u8BB8\u8BC4\u8BBA",value:"0"}]),i=v({api:"",userId:"",token:""}),p=v({type:"0",tag:"",showComment:"1",content:""}),N=async(n,e)=>n&&e?(await(await fetch(n+"/ispeak/tag/list?userId="+e)).json().catch(F=>({data:[]}))).data:[],O=async()=>{const n=await(await fetch(i.value.api+"/ispeak/addByToken",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E({userId:i.value.userId,token:i.value.token},p.value))})).json();return console.log(n),n.code!==0?o.error(n.message):o.success("\u53D1\u5E03\u6210\u529F"),n},S=n=>{var e;n.preventDefault(),(e=a.value)==null||e.validate(async l=>{l?o.error("\u8BF7\u68C0\u67E5\u5FC5\u586B\u53C2\u6570"):O()})};return j(()=>{const n=window.localStorage.getItem("speakOptions"),e=JSON.parse(n||"{}");e.api&&(i.value.api=e.api),e.token&&(i.value.token=e.token),e.userId&&(i.value.userId=e.userId)}),M(i.value,async(n,e)=>{if(n.api&&n.userId&&r.value.length===0){const y=await N(n.api,n.userId);y.length&&(p.value.tag=y[0]._id,y.forEach(_=>{r.value.push({label:_.name,value:_._id})}))}const{api:l,token:F,userId:q}=i.value;localStorage.setItem("speakOptions",JSON.stringify({api:l,token:F,userId:q}))},{debounce:500}),(n,e)=>(w(),P("div",H,[b("div",Q,[t(u(J),{ref_key:"formRef",ref:a,model:p.value,rules:m,size:"medium","label-placement":"top"},{default:d(()=>[t(u(T),{"default-expanded-names":"2",accordion:""},{default:d(()=>[t(u(I),{title:"\u57FA\u7840\u8BBE\u7F6E",name:"1"},{default:d(()=>[t(u(f),{path:"api",label:"API\u5730\u5740"},{default:d(()=>[t(u(h),{value:i.value.api,"onUpdate:value":e[0]||(e[0]=l=>i.value.api=l),type:"text",placeholder:"\u8BF7\u8F93\u5165api\u5730\u5740"},null,8,["value"])]),_:1}),t(u(f),{path:"userId",label:"\u4F60\u7684\u7528\u6237Id"},{default:d(()=>[t(u(h),{value:i.value.userId,"onUpdate:value":e[1]||(e[1]=l=>i.value.userId=l),type:"text",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u7528\u6237Id"},null,8,["value"])]),_:1}),t(u(f),{path:"token",label:"\u7528\u6237Token"},{default:d(()=>[t(u(h),{value:i.value.token,"onUpdate:value":e[2]||(e[2]=l=>i.value.token=l),type:"text",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684token"},null,8,["value"])]),_:1})]),_:1}),t(u(I),{title:"\u53D1\u9001\u8BBE\u7F6E",name:"2"},{default:d(()=>[t(u(f),{path:"type",label:"\u53EF\u89C6\u8303\u56F4"},{default:d(()=>[t(u(B),{value:p.value.type,"onUpdate:value":e[3]||(e[3]=l=>p.value.type=l),placeholder:"\u9009\u62E9\u53EF\u89C6\u8303\u56F4",options:s},null,8,["value"])]),_:1}),t(u(f),{path:"tag",label:"\u9009\u62E9\u6807\u7B7E"},{default:d(()=>[t(u(B),{value:p.value.tag,"onUpdate:value":e[4]||(e[4]=l=>p.value.tag=l),placeholder:"\u9009\u62E9\u53EF\u89C6\u8303\u56F4",options:r.value},null,8,["value","options"])]),_:1}),t(u(f),{path:"showComment",label:"\u662F\u5426\u5141\u8BB8\u8BC4\u8BBA"},{default:d(()=>[t(u(B),{value:p.value.showComment,"onUpdate:value":e[5]||(e[5]=l=>p.value.showComment=l),placeholder:"\u9009\u62E9\u53EF\u89C6\u8303\u56F4",options:g.value},null,8,["value","options"])]),_:1}),t(u(f),{path:"content",label:"\u53D1\u5E03\u5185\u5BB9"},{default:d(()=>[t(u(h),{value:p.value.content,"onUpdate:value":e[6]||(e[6]=l=>p.value.content=l),placeholder:"speak\u5185\u5BB9",type:"textarea",autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1}),b("div",X,[t(u(R),{type:"success",class:"text-green-700 w-28",onClick:S},{default:d(()=>[Y]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])])]))}});const ee=x({setup(c){const a=v(null);return(o,m)=>(w(),K(u(W),{theme:a.value},{default:d(()=>[t(u(V),null,{default:d(()=>[t(Z)]),_:1})]),_:1},8,["theme"]))}});$(ee).mount("#app");
